<?xml version="1.0" encoding="UTF-8" ?>

<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>Landsat to ISO 19115 metadata</title>
  </head>
  <body>
    <h1>Landsat to ISO 19115 metadata</h1>
    <p>
      Landset metadata are provided as <var>key</var>-<var>value</var> pairs in text files (ASCII).
      ISO 19115 metadata are structured as a tree.
      Landsat values are mapped to ISO 19115 metadata when an ISO property can be found for a Landsat key.
    </p>
    <p>
      The Landsat to ISO mapping is not always a one-to-one relationship.
      In some cases the ISO value need to be computed from two or more Landsat values.
      In other cases the ISO value does not appear in the Landsat file at all,
      so the value is hard-coded in the <code>LandsatReader</code> class.
    </p>
    <p><b>Sources:</b></p>
    <ul>
      <li><a href="http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=53798">ISO 19115-1:2014
          - Geographic information - Metadata - Part 1: Fundamentals</a></li>
      <li><a href="https://landsat.usgs.gov/documents/LSDS-809.pdf">LANDSAT 8 (L8) level 1 (L1) Data Format Control Book (DFCB)</a></li>
    </ul>
    <h2>Hard-coded values</h2>
    <p>
      In the following table, values in the Landsat column are from
      table 2-1: <cite>Band Reference Table</cite> in the Landsat DFCB.
      Values in the ISO 19115 column are paths to an ISO property relative to the <code>Metadata</code> root.
      When an ISO property can accept various subtypes, the type used are those listed below:
    </p>
    <ul>
      <li><code>contentInfo</code> is of type <code>ImageDescription</code> (a <code>ContentInformation</code> subtype)</li>
      <li><code>attribute</code> is of type <code>Band</code> (a <code>RangeDimension</code> subtype)</li>
    </ul>
    <table border ="1" cellspacing="0">
      <tr>
        <th>ISO 19115</th>
        <th>Landsat</th>
        <th>Description</th>
      </tr><tr>
        <td><code>contentInfo/attributeGroup/attribute[0]/peakResponse</code></td>
        <td><code>433</code></td>
        <td>Coastal Aerosol (Operational Land Imager (OLI)).</td>
      </tr><tr>
        <td><code>contentInfo/attributeGroup/attribute[1]/peakResponse</code></td>
        <td><code>482</code></td>
        <td>Blue (OLI).</td>
      </tr><tr>
        <td><code>contentInfo/attributeGroup/attribute[2]/peakResponse</code></td>
        <td><code>562</code></td>
        <td>Green (OLI).</td>
      </tr><tr>
        <td colspan="3"><font color="red">TODO</font></td>
      </tr><tr>
        <td><code>contentInfo/attributeGroup/attribute[0-10]/boundUnits</code></td>
        <td>nanometre</td>
        <td>Units in which sensor wavelengths are expressed.</td>
      </tr><tr>
        <td><code>contentInfo/attributeGroup/contentType</code></td>
        <td><code>ContentType.PHYSICAL_MEASUREMENT</code></td>
        <td>The types of information represented by the value(s).</td>
      </tr>
    </table>

    <h2>Values read from the Landsat file</h2>
    <p>
      In the following table, values in the Landsat column are from
      table 3-4: <cite>L1Gt / L1T Metadata File</cite> in the Landsat DFCB.
      Values in the ISO 19115 column are paths to an ISO property relative to the <code>Metadata</code> root.
      When an ISO property can accept various subtypes, the type used are those listed below:
    </p>
    <ul>
      <li><code>identificationInfo</code> is of type <code>DataIdentification</code> (a <code>Identification</code> subtype)</li>
      <li><code>contentInfo</code> is of type <code>ImageDescription</code> (a <code>ContentInformation</code> subtype)</li>
    </ul>
    <table border ="1" cellspacing="0">
      <tr>
        <th>ISO 19115</th>
        <th>Landsat</th>
        <th>Description</th>
      </tr><tr>
        <td><code>dateInfo/date</code></td>
        <td><code>FILE_DATE</code></td>
        <td>The date when metadata file product set was created.</td>
      </tr><tr>
        <td><code>dateInfo/dateType</code></td>
        <td><code>DateType.CREATION</code></td>
        <td>Hard-coded ISO 19115 value to be set only if <code>dateInfo/date</code> exists.</td>
      </tr><tr>
        <td><code>identificationInfo/credit</code></td>
        <td><code>ORIGIN</code></td>
        <td>Recognition of those who contributed to the resource(s).</td>
      </tr><tr>
        <td><code>identificationInfo/citation/identifier</code></td>
        <td><code>LANDSAT_SCENE_ID</code></td>
        <td>The unique Landsat scene identifier.</td>
      </tr><tr>
        <td><code>identificationInfo/extent/geographicElement/westBoundLongitude</code></td>
        <td><code>min(CORNER_UL_LON_PRODUCT, CORNER_LL_LON_PRODUCT)</code></td>
        <td>The western-most longitude value in degrees.</td>
      </tr><tr>
        <td><code>identificationInfo/extent/geographicElement/eastBoundLongitude</code></td>
        <td><code>max(CORNER_UR_LON_PRODUCT, CORNER_LR_LON_PRODUCT)</code></td>
        <td>The eastern-most longitude value in degrees.</td>
      </tr><tr>
        <td><code>identificationInfo/extent/geographicElement/southBoundLongitude</code></td>
        <td><code>min(CORNER_LL_LAT_PRODUCT, CORNER_LR_LAT_PRODUCT)</code></td>
        <td>The southern-most longitude value in degrees.</td>
      </tr><tr>
        <td><code>identificationInfo/extent/geographicElement/northBoundLongitude</code></td>
        <td><code>max(CORNER_UL_LAT_PRODUCT, CORNER_UR_LAT_PRODUCT)</code></td>
        <td>The northern-most longitude value in degrees.</td>
      </tr><tr>
        <td><code>identificationInfo/extent/temporalElement/startTime</code></td>
        <td><code>DATE_ACQUIRED + SCENE_CENTER_TIME</code></td>
        <td>The date and scene center time the image was acquired.</td>
      </tr><tr>
        <td><code>identificationInfo/resourceFormat/formatSpecificationCitation/title</code></td>
        <td><code>OUTPUT_FORMAT</code></td>
        <td>The name of the data transfer format.</td>
      </tr><tr>
        <td><code>acquisitionInformation/platform/identifier/code</code></td>
        <td><code>SPACECRAFT_ID</code></td>
        <td>Spacecraft from which the data were captured.</td>
      </tr><tr>
        <td><code>acquisitionInformation/instrument/identifier/code</code></td>
        <td><code>SENSOR_ID</code></td>
        <td>Sensor(s) used to capture this scene.</td>
      </tr><tr>
        <td><code>contentInfo/cloudCoverPercentage</code></td>
        <td><code>CLOUD_COVER</code></td>
        <td>The overall cloud coverage (percent) of the WRS-2 scene.</td>
      </tr><tr>
        <td><code>contentInfo/illuminationAzimuthAngle</code></td>
        <td><code>SUN_AZIMUTH</code></td>
        <td>The Sun azimuth angle in degrees for the image center location at the image center acquisition time.</td>
      </tr><tr>
        <td><code>contentInfo/illuminationElevationAngle</code></td>
        <td><code>SUN_ELEVATION</code></td>
        <td>The Sun elevation angle in degrees for the image center location at the image center acquisition time.</td>
      </tr>
    </table>

    <h2>Mapping to revisit</h2>
    <p>
      Mappings in the following table need to be reviewed.
    </p>
    <table border ="1" cellspacing="0">
      <tr>
        <td><code>MetadataIdentifier/Code</code></td>
        <td><code>REQUEST_ID</code></td>
        <td><font color="red">(maybe should be a property in the acquisition package instead)</font></td>
      </tr><tr>
        <td><code>MetadataIdentifier/Version</code></td>
        <td><code>PROCESSING_SOFTWARE_VERSION</code></td>
        <td><font color="red">(maybe should be a property in the lineage package instead)</font></td>
      </tr><tr>
        <td><code>IdentificationInfo/Citation/Title</code></td>
        <td><code>DATA_TYPE</code></td>
        <td><font color="red">(DATA_TYPE is not really a title - need to find another location)</font></td>
      </tr><tr>
        <td><code>IdentificationInfo/Citation/Dates</code></td>
        <td><code>ORIGIN</code></td>
        <td>The date when metadata file product set was created.
            <font color="red">(duplicated value?)</font></td>
      </tr><tr>
        <td><code>IdentificationInfo/ResourceFormats/Version</code></td>
        <td><code>DATA_TYPE</code></td>
        <td>The name of the data transfer format.
            <font color="red">(duplicated value?)</font></td>
      </tr><tr>
        <td><code>IdentificationInfo/ResourceFormats/AmendmentNumber</code></td>
        <td><code>ELEVATION_SOURCE</code></td>
        <td>Indicates the source of the DEM used in the correction process.
            <font color="red">(maybe should be a property in the lineage package instead)</font></td>
      </tr><tr>
        <td><code>AcquisitionInformation/AcquisitionRequirements/citation/Title</code></td>
        <td><code>DATA_TYPE</code></td>
        <td>Standard products, Identification of reference or guidance material for the requirement.</td>
      </tr><tr>
        <td><code>AcquisitionInformation/AcquisitionRequirements/Objectives1/function</code></td>
        <td><code>ORIENTATION</code></td>
        <td>The collection technique for the objective - Orientation.</td>
      </tr><tr>
        <td><code>AcquisitionInformation/AcquisitionRequirements/Objectives2/function</code></td>
        <td><code>RESAMPLING_OPTION</code></td>
        <td>The collection technique for the objective - Resampling.</td>
      </tr><tr>
        <td><code>AcquisitionInformation/AcquisitionRequirements/Platforms/Instrument/Description</code></td>
        <td><code>NADIR_OFFNADIR</code></td>
        <td>Description instrument used to capture this scene- Nadir or offnadir.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension/DimensionSize</code></td>
        <td><code>WRS_PATH</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension1/DimensionSize</code></td>
        <td><code>WRS_ROW</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension3/DimensionSize</code></td>
        <td><code>PANCHROMATIC_LINES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension4/DimensionSize</code></td>
        <td><code>PANCHROMATIC_SAMPLES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension5/Resolution</code></td>
        <td><code>GRID_CELL_SIZE_PANCHROMATIC</code></td>
        <td>The degree of detail in the grid dataset.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension6/DimensionSize</code></td>
        <td><code>REFLECTIVE_LINES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension7/DimensionSize</code></td>
        <td><code>REFLECTIVE_SAMPLES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension8/Resolution</code></td>
        <td><code>GRID_CELL_SIZE_REFLECTIVE</code></td>
        <td>The degree of detail in the grid dataset.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension9/DimensionSize</code></td>
        <td><code>THERMAL_LINES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension10/DimensionSize</code></td>
        <td><code>THERMAL_SAMPLES</code></td>
        <td>The number of elements along the axis.</td>
      </tr><tr>
        <td><code>SpatialRepresentationInfo/AxisDimensionProperties/Dimension11/Resolution</code></td>
        <td><code>GRID_CELL_SIZE_THERMAL</code></td>
        <td>The degree of detail in the grid dataset.</td>
      </tr><tr>
        <td><code>ReferenceSystemInfo</code></td>
        <td><code>DATUM</code>, <code>ELLIPSOID</code>, <code>UTM_ZONE</code></td>
        <td>The description of the spatial and temporal reference systems used in the dataset with if mapproject is UTM.</td>
      </tr><tr>
        <td><code>ReferenceSystemInfo</code></td>
        <td><code>DATUM</code>, <code>ELLIPSOID</code>, <code>VERTICAL_LON_FROM_POLE</code>, <code>TRUE_SCALE_LAT</code>, <code>FALSE_EASTING</code>, <code>FALSE_NORTHING</code></td>
        <td>The description of the spatial and temporal reference systems used in the dataset with if mapproject is PS.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Title</code></td>
        <td><code>DATA_TYPE</code></td>
        <td>Name standard product.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Edition</code></td>
        <td><code>GROUND_CONTROL_POINTS_VERSION</code></td>
        <td>GCP dataset version used in the precision correction process.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Series</code></td>
        <td><code>GROUND_CONTROL_POINTS_MODEL</code></td>
        <td>Number of GCPs used in the precision correction process.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element3/MeasureDescription</code></td>
        <td><code>CLOUD_COVER_LAND</code></td>
        <td>The description of the measure being determined.
            The overall cloud coverage over land (percent) in the WRS-2 scene.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element4/MeasureDescription</code></td>
        <td><code>IMAGE_QUALITY_OLI</code></td>
        <td>The description of the measure being determined.
            The composite image quality for the OLI bands.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element5/MeasureDescription</code></td>
        <td><code>IMAGE_QUALITY_TIRS</code></td>
        <td>The description of the measure being determined.
            The composite image quality for the TIRS bands.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element6/MeasureDescription</code></td>
        <td><code>TIRS_SSM_POSITION_STATUS</code></td>
        <td>The description of the measure being determined.
            The TIRS scene select mirror position status.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element7/MeasureDescription</code></td>
        <td><code>ROLL_ANGLE</code></td>
        <td>The description of the measure being determined.
            The amount of spacecraft roll angle at the scene center.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element10/MeasureDescription</code></td>
        <td><code>EARTH_SUN_DISTANCE</code></td>
        <td>The description of the measure being determined.
            Measurement of the earth to sun distance at the particular day and time of imagery acquisition</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element11/MeasureDescription</code></td>
        <td><code>GROUND_CONTROL_POINTS_VERIFY</code></td>
        <td>The description of the measure being determined.
            Number of GCPs used in the verification of the terrain corrected product.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element12/MeasureDescription</code></td>
        <td><code>GEOMETRIC_RMSE_VERIFY</code></td>
        <td>The description of the measure being determined.
            RMSE of the geometric residuals (meters) measured on the terrain.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element13/MeasureDescription</code></td>
        <td><code>GEOMETRIC_RMSE_MODEL</code></td>
        <td>The description of the measure being determined.
            Combined Root Mean Squared Error (RMSE) of the geometric residuals (meters).</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element14/MeasureDescription</code></td>
        <td><code>GEOMETRIC_RMSE_MODEL_Y</code></td>
        <td>The description of the measure being determined.
            The post-fit RMSE for the along-track direction.</td>
      </tr><tr>
        <td><code>DataQualityInfo/citation/Reports/Element15/MeasureDescription</code></td>
        <td><code>GEOMETRIC_RMSE_MODEL_X</code></td>
        <td>The description of the measure being determined.
            The post-fit RMSE for the along-track direction.</td>
      </tr>
    </table>
  </body>
</html>
